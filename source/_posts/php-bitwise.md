---
title: php-位运算
date: 2018-08-23 19:35:10
categories: PHP
tags:
	- 位运算
---
# 位运算符 #
作用是对二进制位从低到高位对齐后进行运算，其他进制需要先转换为二进制再运算
<!--more-->
<table><thead><tr><th>符号</th><th>作用</th><th>举例</th><th>个人理解</th></tr></thead><tbody><tr><td>&amp;</td><td>按位与</td><td><code>$m &amp; $n</code></td><td>全1为1，否则为0</td></tr><tr><td>|</td><td>按位或</td><td><code>$m | $n</code></td><td>全0为0，有1为1</td></tr><tr><td>^</td><td>按位异或</td><td><code>$m ^ $n</code></td><td>不同为1，相同为0</td></tr><tr><td>~</td><td>按位取反</td><td><code>~$m</code></td><td></td></tr><tr><td>&lt;&lt;</td><td>向左移位</td><td><code>$m &lt;&lt; $n</code></td><td>乘以2的n次方</td></tr><tr><td>&gt;&gt;</td><td>向右移位</td><td><code>$m &gt;&gt; $n</code></td><td>除以2的n次方</td></tr></tbody></table>

## &运算符 ##
```php
    <?php
    $m = 1;
    $n = 2;
    $mn = $m & $n;
    echo $mn;
```
运行结果为0

解释：将1，2分别转换为二进制为

00000001

00000010

在按位与的过程中，按位比较，全1为1，比较结果为00000000，所以输出0
## |运算符 ##
```php
    <?php
    $m = 1;
    $n = 2;
    $mn = $m | $n;
    echo $mn;
```
运行结果为3，同样，转换成如上的二进制

00000001

00000010

在按位或的过程中，有1为1，全0为0，则结果为00000011，所以输出3
## ^运算符 ##
```php
    <?php
    $m = 1;
    $n = 2;
    $mn = $m ^ $n;
    echo $mn;
```
运行结果为3，同样，转换成如上的二进制

00000001

00000010

在按位亦或的过程中，不同为1，相同为0，所以结果为00000011,进而输出3。
## 扩展 ##
由于^运算可以推算：

0^1=1 0^0=0 =>因此，0异或任何数等于任何数本身

1^0=1 1^1=0 =>因此，1异或任何数等于任何数取反

任何数异或自己=>把自己置0

因此可以借用^运算来达到不使用第三个变量接收来交换两个变量的值：
```php
    function swap1(&$a, &$b){
	    $a = $a ^ $b;
	    $b = $a ^ $b;
	    $a = $b ^ $a;
    }
```
这样计算的原因：

$a = $a ^ $b;

$b = $a ^ $b = ($a ^ $b) ^ $b = $a ^ ($b ^ $b) = $a ^ 0，根据异或特点，0与任何数异或等于任何数本身。同理可推导，$a=$b。
另外需要注意的是这里使用的是传引用而非传值，因为对两个变量值的改变必须要在函数外也能生效。
## ~运算符 ##
```php
    <?php
    $m = 2;
    $m1 = ~$m;
    echo $m1;
```
运行结果为-3。

注：在计算机中，负数以其正值的补码形式表达。

1: 2的32位原码为 0000 0000 0000 0000 0000 0000 0000 0010

2: 按位取反后为 1111 1111 1111 1111 1111 1111 1111 1101

由于最前面的数为1，符号位为1，即为负数，所以，以其正值的补码形式表示为：（符号位不变，按位取反，末尾加1）

1000 0000 0000 0000 0000 0000 0000 0011

所以输出为-3

## <<运算符 ##
```php
    <?php
    $m = 3;
    $m1=$m << 1;
    echo $m1;
```
运算结果为6

左移运算的实质是将对应的数据的二进制值逐位左移若干位，并在空出的位置上填0，最高位溢出并舍弃。

3的32位原码为，0000 0000 0000 0000 0000 0000 0000 0011

左移一位：0000 0000 0000 0000 0000 0000 0000 0110

所以为6

根据手册描述可以看出位运算可以看出向左移一位，则是实现乘2运算。由于位移操作的运算速度比乘法的 运算速度高很多。因此在处理数据的乘法运算的时，采用位移运算可以获得较快的速度。移动n位则结果为*2的n次方。
提示 将所有对2的乘法运算转换为位移运算，可提高程序的运行效率。

## >>运算符 ##
右移一位，和<<运算符，类似，只不过这个是右移，所以是做2的除法，需要注意的是当除去的结果小于1则为零。