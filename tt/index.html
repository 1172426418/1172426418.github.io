<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title></title>

    <script>
        //判断客户端设备，选择写入meta
        function init_viewport(){
            if(navigator.userAgent.indexOf('Android') != -1){
                var version = parseFloat(RegExp.$1);
                if(version>2.3){
                    var width = window.outerWidth == 0 ? window.screen.width : window.outerWidth;
                    var phoneScale = parseInt(width)/500;
                    document.write('<meta name="viewport" content="width=500, minimum-scale = '+ phoneScale +', maximum-scale = '+ phoneScale +', target-densitydpi=device-dpi">');
                }else{
                    document.write('<meta name="viewport" content="width=500, target-densitydpi=device-dpi, user-scalable=0">');
                }
            }else if(navigator.userAgent.indexOf('iPhone') != -1){
                var phoneScale = parseInt(window.screen.width)/500;
                document.write('<meta name="viewport" content="width=500, min-height=750, initial-scale=' + phoneScale +', maximum-scale='+phoneScale+', user-scalable=0" /> ');         //0.75   0.82
            }else{
                document.write('<meta name="viewport" content="width=500, height=750, initial-scale=0.64" /> '); //0.75  0.82
            }
        }
        init_viewport();
    </script> 

	<style>
		* {
            padding: 0px;
            margin: 0px;
            -webkit-box-sizing: border-box;
        } 
        body {
            background-color: white;
        }
        a {
            color: white;
            text-decoration: none; 
        }

        #div_container { /*最外层div，用于居中兼容PC和移动*/
            width: 500px;
            margin: 0px auto; 
            position: relative; 
            /*background-color: #FAFAFA;*/
            font-size: 1em;
        }


        .div_pure_words { /*文字部分的最外层，用于定位*/
            position: relative;
            display: none;
        }
        .div_pure_words_bg { /*背景设置在这里*/
            background-repeat: repeat; 
            background-size: 100%; 
            background-attachment: fixed; 
            width: 500px;
            min-height: 500px; 
        }
        .div_pure_words_height {
            visibility: hidden;
            padding: 30px; 
            text-align: justify;  /*为了使文字两端对齐 */
            white-space: pre-wrap; /*保留换行效果*/
            font-size: 1.1em;
            font-family: "Microsoft YaHei","Arial";
            color: white; 
        }
        .div_pw_typed {
            position: absolute;
            left: 0;
            right: 0;  /*4个方向定位使div充满整个画画*/
            top: 0;
            bottom: 0;  /*4个方向定位使div充满整个画画*/
            width: 500px;            
            background:rgba(255,255,255,0.8); /*半透明效果*/
            padding: 30px; 
            text-align: justify;  /*为了使文字两端对齐 */
        } 
        #span_pw_typed {
            width:100%; /*为了使文字两端对齐 */ 
            white-space:pre-wrap; /*保留换行效果*/ 
            font-size: 1.1em;
            font-family: "Microsoft YaHei","Arial";
        }


        #div_start_bg{
            width: 100%; height: 100%;
            position: absolute;
            left: 0px; top: 0px;
            z-index: 44;
            background-color: white;
        }
	</style>

    <!-- 按钮部分的样式 -->
    <link type="text/css" rel="stylesheet" href="style/css/theme_public_btn.css">


        

    <!-- 按需加载，选择此片头时方才加载 -->
        <link type="text/css" rel="stylesheet" href="style/css/start_hearttree.css">    

     

     

      

     

     
</head>

<body>
    <div id="div_container"> <!-- 最外层div，用于居中兼容PC和移动 --> 
        <div id="div_start_bg"></div> <!-- 用于遮挡主题，作为片头的背景 -->

                

        <!-- 按需加载，选择此片头时方才加载 -->
            <div id="div_hearttree">
                <div id="div_tree_error">很可惜你的手机浏览器不支持，错过了惊喜效果哦</div>
                <div id="div_tree_start"></div>
                <div id="div_tree_main">
                    <div id="div_tree_text">
                        <span id="span_tree_typed"></span>
                    </div> 
                    <canvas id="canvas_tree" width="500" height="815"></canvas>
                    <div id="div_tree_timer">
                        <span id="span_tree_desc"></span>
                        <div id="div_tree_interval"></div>
                    </div>
                </div>
            </div><!-- 按需加载，选择此片头时方才加载 -->



        


          



        


                
  
        <!-- 以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头 -->
        <!-- 以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头 -->
        <!-- 以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头 -->
        <!-- 以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头 -->
        <!-- 以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头  以上是动画和视频片头 -->






        <div class="div_pure_words"> <!-- 文字部分的最外层，用于定位 -->
            <div class="div_pure_words_bg"><!-- 背景设置在这里 -->
                <div class="div_pure_words_height"> 
                    <!-- 正文的内容复制到这里面，撑开整个文档的高度 -->
                </div>
            </div> 
            <div class="div_pw_typed"> <!-- 正文部分，绝对定位 --> 
                <span id="span_pw_typed"></span>
            </div> 
        </div>





        


        
        <div id='div_btn_container'> <!-- 按钮部分的最外层，处于文档流之中 -->
            <div id="div_btn_inner"> <!-- 按钮部分内层，用于定位 -->

                <div class='div_music_tips'></div>
                <div class="div_btn" id="div_music" onclick="music_switch()"> <!-- 音乐按钮部分 -->
                    <img id='img_music' src='style/images/music_note_big.png' style='-webkit-animation:music_play_rotate 1s linear infinite'> 
                    <audio id="audio_music" autoplay="autoplay" loop="loop">
                        <source type="audio/mpeg"/>  
                        <!-- 您的浏览器不支持播放音乐 -->
                    </audio>
                </div>

                <div class='div_record_tips'></div>
                <div class="div_btn" id="div_record" onclick="record_switch()"> <!-- 录音按钮部分 -->
                    语音
                    <audio id="audio_record" loop="loop">
                        <source type="audio/mpeg"/>  
                        <!-- 您的浏览器不支持播放音乐 -->
                    </audio>
                </div>
                
                <!-- 只在提交状态显示 只在提交状态显示 只在提交状态显示 只在提交状态显示 -->
                <div class="div_btn" id='div_support'>
                        <a href="https://mp.weixin.qq.com/s/DMACXYHVHSR3KLSNwJLLEw"><span>更多</span></a>
                    </div>  
                <!-- 只在提交状态显示 只在提交状态显示 只在提交状态显示 只在提交状态显示 -->

                <!-- 只在未提交状态显示 只在未提交状态显示 只在未提交状态显示 只在未提交状态显示 -->
                  
                <!-- 只在未提交状态显示 只在未提交状态显示 只在未提交状态显示 只在未提交状态显示 -->
            </div> 
        </div>
    </div>







    <script src="style/js/jquery-2.0.3.min.js"></script>
    <script src="style/js/typed.min.js"></script>
    <script src="style/js/support_upload_as.js"></script>
    <script src="style/js/jweixin-1.2.0.js"></script>
    <script>
        var window_height=$(window).height();
        console.log('window_height ->'+window_height);

        var theme='pure_words';
        console.log('theme ->'+theme);
        var theme_content={"m_albumun_img":["","","","",""],"m_albumun_text":["","","",""],"m_album_loop":"loop_n","pure_words_content":"\u7b54\u6848\u5f88\u957f\uff0c\u6211\u51c6\u5907\u7528\u4e00\u751f\u7684\u65f6\u95f4\u6765\u56de\u7b54\uff0c\u4f60\u51c6\u5907\u8981\u542c\u4e86\u5417\uff1f\r\n\r\n\r\n\r\n\u80fd\u591f\u9047\u89c1\u4f60\uff0c\u5bf9\u6211\u6765\u8bf4\u662f\u6700\u5927\u7684\u5e78\u798f\u3002\u6709\u4e86\u4f60\uff0c\u6211\u7684\u751f\u6d3b\u53d8\u7684\u65e0\u9650\u5bbd\u5e7f\uff0c\u6709\u4e86\u4f60\uff0c\u4e16\u754c\u53d8\u5f97\u5982\u6b64\u8ff7\u4eba\u3002\u4f60\u662f\u4e16\u754c\uff0c\u4e16\u754c\u662f\u4f60\u3002\u6211\u613f\u610f\u7528\u81ea\u5df1\u7684\u5fc3\uff0c\u597d\u597d\u7684\u966a\u7740\u4f60\uff0c\u7231\u7740\u4f60\u3002\u966a\u4f60\u5230\u4f60\u60f3\u53bb\u7684\u5730\u65b9\uff0c\u7528\u5fc3\u8d70\u5b8c\u6211\u4eec\u4eba\u751f\u7684\u4f59\u4e0b\u7684\u65c5\u7a0b\u3002\u5728\u672a\u6765\u7684\u65e5\u5b50\u91cc\uff0c\u4e5f\u8bb8\u4ec0\u4e48\u90fd\u65e0\u6cd5\u786e\u5b9a\uff0c\u4f46\u552f\u4e00\u53ef\u4ee5\u786e\u5b9a\u7684\u662f\uff0c\u6211\u7231\u7684\u4eba\u662f\u4f60\uff0c\u65e0\u8bba\u73b0\u5728\u8fd8\u662f\u5c06\u6765\uff0c\u6211\u60f3\u6211\u8fd9\u91cc\u90fd\u4f1a\u662f\u4f60\u6700\u6e29\u6696\u7684\u6e2f\u6e7e\uff0c\u90fd\u662f\u4e3a\u4f60\u906e\u98ce\u907f\u96e8\u7684\u57ce\u5899\u3002\u65e0\u8bba\u72c2\u98ce\uff0c\u65e0\u8bba\u66b4\u96e8\u3002\u6211\u90fd\u4f1a\u966a\u5728\u4f60\u7684\u8eab\u65c1\uff0c\u8ba9\u4f60\u4e0d\u4f1a\u611f\u5230\u4e1d\u6beb\u7684\u62c5\u5fc3\u548c\u60f6\u6050\u3002\u6211\u4f1a\u73cd\u60dc\u548c\u4f60\u5728\u4e00\u8d77\u7684\u6bcf\u4e00\u523b\uff0c\u6bcf\u4e00\u5206\uff0c\u6bcf\u4e00\u79d2\u3002\u8c01\u53eb\u4f60\u662f\u6211\u6700\u7231\u7684\u4eba\uff0c\u8c01\u53eb\u4f60\u662f\u7b2c\u4e8c\u5e78\u798f\u7684\u4eba\uff0c\u4e3a\u4e86\u4f60\uff0c\u6211\u613f\u7528\u81ea\u5df1\u7684\u53cc\u624b\u4e3a\u4f60\u6491\u8d77\u4e00\u7247\u8273\u9633\uff01\u2764\ufe0f","typed_bool":"typed_y","cursor_char":"cursor_heart","bg_style_pure_words":"bg_opacity","bg_img":"http:\/\/imgs.makusi.cn\/844_191202141135.jpg","simple_page_content":"&lt;p&gt;&lt;br&gt;&lt;\/p&gt;","video_page_content":"","bg_style":"bg_simple","m_album_img":["http:\/\/imgs.makusi.cn\/844_191203081501.jpg","http:\/\/imgs.makusi.cn\/844_191203081512.jpg","http:\/\/imgs.makusi.cn\/844_191203081517.jpg"],"m_album_text":["\u8fd8\u662f\u5f88\u559c\u6b22\u4f60\uff0c\u50cf\u71d5\u5c3e\u526a\u65ad\u70df\u96e8\uff0c\u4e0d\u77e5\u4f55\u8d77","\u6ca1\u4ec0\u4e48\u7279\u522b\u559c\u6b22\u7684\u96f6\u98df\uff0c\u6ca1\u4ec0\u4e48\u7279\u522b\u559c\u6b22\u7684\u6b4c\uff0c\u552f\u6709\u4e2a\u7279\u522b\u559c\u6b22\u7684\u4f60","\u4f60\u4e0d\u662f\u6700\u597d\u7684\uff0c\u4f46\u662f\u6709\u4f60\uff0c\u5374\u6bd4\u4ec0\u4e48\u90fd\u597d"]};
        console.log(theme_content);

        var music_json={"music_select":"m_online","m_online_id":"6","m_online_url":"http:\/\/cdn.aitetu520.com\/yujian.mp3","m_upload_name":"null","m_upload_url":"null"};
        console.log(music_json);
        var record_json={"record_bool":"r_false","r_wechat_time":"null","r_wechat_url":"null","r_wechat_amr":"null"};
        console.log(record_json);
        var signPackage={"appid":"wx47f716bdd7699533","timestamp":1575334226,"nonceStr":"Cba0w4RF8YJlCA0p","url":"http:\/\/www.makusi.cn\/Home\/Play\/play_show\/ws\/YGdlnmtm","signature":"492e9ba284a9eccd213ccdc4d9e265451ee616c3","rawString":"jsapi_ticket=sM4AOVdWfPE4DxkXGEs8VHINcjHJVwMsFjJyfreRy7ADpib_vo4q_DXddWzCKZEIqiM34Eh5a5ZKUGs_pcXiiQ&noncestr=Cba0w4RF8YJlCA0p&timestamp=1575334226&url=http:\/\/www.makusi.cn\/Home\/Play\/play_show\/ws\/YGdlnmtm"};

        var main_title='';
        // console.log(main_title);
        if(main_title=='' || main_title=='null'){  //允许标题为空
            document.title='慢慢喜欢你';
        } 
        // console.log(""); 


        var pure_words_content=theme_content['pure_words_content'];
        var str_cursorChar; 
        var typed_bool;

        var interval_pw_height;
        var height_div_pw=$(".div_pure_words_height").height();
        function init_pure_words(){
            //允许内容为空时直接展示，不设置为随机内容，用于空主题
            if(typeof(pure_words_content)=='undefined'){ //处理全新作品
                var array_str_temp=[];
                random_text_array(array_str_temp,12); //获取随机的模板文字
                // array_str_temp.push('你现在看到的只是案例，文字是可以自定义哒，6000字以下');
                pure_words_content=array_str_temp.join('\r\r');
            }
            $(".div_pure_words_height").html(pure_words_content+'22222');  //初始化复制内容，撑开文档高度            
            
            // 初始化设置div的bg图片 初始化设置div的bg图片
            if(typeof(theme_content['bg_style_pure_words'])!='undefined' && theme_content['bg_style_pure_words']=='bg_opacity'){
                if(typeof(theme_content['bg_img'])!='undefined' && theme_content['bg_img']!=''){                    
                    $(".div_pure_words_bg").css({"background-image": "url("+theme_content['bg_img']+")"});
                }
            } 

            //以下是打字效果的js 
            if(typeof(theme_content['cursor_char'])!='undefined' && theme_content['cursor_char']!=''){
                switch(theme_content['cursor_char']){ //设置打字光标的样式
                    case 'cursor_heart':
                        str_cursorChar='❤';
                        break;
                    case 'cursor_sub':
                        str_cursorChar='_';
                        break;
                    case 'cursor_music':
                        str_cursorChar='♫';
                        break;
                    case 'cursor_star':
                        str_cursorChar='★';
                        break;
                    case 'cursor_sun':
                        str_cursorChar='☀';
                        break;
                    default:
                        str_cursorChar='|';
                }
            }else{ //处理全新作品，默认显示打字效果
                str_cursorChar='❤';
            }
            
            //判断用户有没有选择打字效果
            if(typeof(theme_content['typed_bool'])!='undefined' && theme_content['typed_bool']!=''){
                typed_bool= theme_content['typed_bool']=='typed_y' ? true : false;                  
            }else{
                typed_bool=false; //默认显示打字效果
            } 
            // console.log(typed_bool);
        
            display_pure_words(); 
            $(".div_pure_words").fadeIn();
            
            interval_pw_height=setInterval(function(){
                console.log('div_pure_words_height -> '+$('.div_pure_words_height').height());
                var least_height_div_pw=$('.div_pure_words_height').height();
                if(least_height_div_pw>height_div_pw){
                    height_div_pw=least_height_div_pw;
                }else{
                    clearInterval(interval_pw_height);
                    $(".div_pure_words_height").height(least_height_div_pw+100);
                    if($(".div_pure_words_height").height()<window_height){
                        $(".div_pure_words_height").height(window_height); //不能小于窗口的高度
                        console.log('let us be high as window');
                    } 
                }
            },100);
        }

        
        function display_pure_words(){
            if(typed_bool){ 
                var typed_pure_words = new Typed('#span_pw_typed', {
                    strings: [pure_words_content], //输入内容, 支持html标签
                    typeSpeed: 120, //打字速度
                    cursorChar: str_cursorChar,//替换光标的样式
                    contentType: 'html', //值为html时，将打印的文本标签直接解析html标签
                    onComplete: function(abc){
                                // console.log(abc); 
                                console.log('finished typing words'); 
                                // console.log($('#span_pw_typed').height()-$(".div_pure_words_height").height());
                            },
                });
            }else{
                //如果不需要打字效果就直接显示
                $("#span_pw_typed").html(pure_words_content).fadeIn(); 
            }
            init_attachment();
        } 


        function random_text_array(temp_array,length){  //获取随机的模板文字
            console.log('random_text_array');
            var random_array=[];
            while(random_array.length<length){
                // var random_num=Math.floor(Math.random()*(array_as_pics.length-0))+0;
                var random_num=Math.floor(Math.random()*(array_as_words_love.length)); //随机取值 
                if(random_array.indexOf(random_num)==-1){
                    random_array.push(random_num);
                }
            }
            // console.log(random_array);
            for(var i=0; i<length; i++){  
                temp_array.push(array_as_words_love[random_array[i]]); //获取随机的模板文字
            }
        }         
        
    </script>







        

    <!-- 按需加载，选择此片头时方才加载 -->
        <script src="style/js/jscex.min.js"></script>
        <script src="style/js/jscex-parser.js"></script>
        <script src="style/js/jscex-jit.js"></script>
        <script src="style/js/jscex-builderbase.min.js"></script>
        <script src="style/js/jscex-async.min.js"></script>
        <script src="style/js/jscex-async-powerpack.min.js"></script>    
        <script src="style/js/love.js" charset="utf-8"></script> <!-- 按需加载，选择此片头时方才加载 -->
    

    <script> 
        var start_content={"chase_title":"\u4f60\u77e5\u905310\u7684\u7684\u542b\u4e49\u5417 \u90a3\u6211\u6765\u544a\u8bc9\u4f60\uff1f","chase_text":"\u7b54\u6848\u5f88\u957f\uff0c\u6211\u51c6\u5907\u7528\u4e00\u751f\u7684\u65f6\u95f4\u6765\u56de\u7b54\uff0c\u4f60\u51c6\u5907\u8981\u542c\u4e86\u5417\uff1f","chase_benefit":["\u621110\u523b\u60f3\u7740\u4f60 ","\u6211\u559c\u6b22\u4f60\u5f889\u4e86","\u8acb8\u4f60\u4ea4\u7d66\u6211","\u6211\u7edd\u5bf9\u4e0d\u4f1a7\u8d1f\u4f60"," \u6c38\u8fdc6\u5728\u4f60\u8eab\u8fb9","5\u53d14\u4e00\u8f88\u5b50","\u7edd\u5bf9\u4e0d\u4f1a3\u5fc32\u610f","\u53ea\u7231\u4f601\u4e2a\u4eba"],"bg_style":"bg_custom","bg_img":"http:\/\/imgs.makusi.cn\/844_191202140722.jpg","img_bool":"img_true","img_src":"http:\/\/imgs.makusi.cn\/844_191202140037.jpg","hearttree_text":"\u6211\u77e5\u9053\u9047\u89c1\u4f60\u4e0d\u5bb9\u6613 \uff0c\u2764\ufe0f\r\n\u9519\u8fc7\u4e86 \u4f1a\u5f88\u53ef\u60dc\u3002\u2764\ufe0f\r\n\u6211\u4e0d\u5e0c\u671b\u4f59\u751f\u90fd\u662f\u56de\u5fc6 \u2764\ufe0f\r\n\u60f3\u4f59\u751f\u90fd\u6709\u4f60\u2764\ufe0f\r\n\u6211\u7231\u4f60\u2764\ufe0f","hearttree_desc":"\u7231\u4f60\u4e00\u5343\u5e74","hearttree_time":"10000-12-31","hearttree_time_type":"hearttree_negative","courage_h1":"","courage_h2":"","courage_receiver":"","courage_text":["\u6211\u505a\u4e8b\u603b\u662f\u4e09\u5206\u949f\u70ed\u5ea6\uff0c\u5374\u4e5f\u7231\u4f60\u8fd9\u4e48\u4e45\u3002","\u6211\u76ee\u5149\u77ed\u6d45\uff0c\u53ea\u770b\u5f97\u89c1\u4f60\uff0c\u6211\u5fc3\u80f8\u72ed\u7a84\uff0c\u53ea\u5bb9\u5f97\u4e0b\u4f60","\u8ba9\u6211\u4eec\u4e00\u76f4\u7275\u7740\u624b\uff0c\u544a\u8bc9\u5bf9\u65b9\u4ec0\u4e48\u662f\u6c38\u8fdc","\u60f3\u505a\u4f60\u7684\u7259\u9f7f\uff0c\u6211\u96be\u53d7\u7684\u65f6\u5019\uff0c\u6709\u4f60\u75bc"],"cursor_char":"cursor_heart"}; //可能为null
        console.log(start_content); 

        var start_id;
        $(function(){
            //此事件为触发互动创意
            start_id='hearttree'; //可能为null
            init_start(start_id);
        });
        
        function init_start(start_id){ 
            console.log('init_start ->'+start_id);
            switch(start_id){
                case 'loveformat':
                    $('.div_loveformat').show();
                    init_loveformat();
                    break;
                case 'hearttree':
                    $('#div_hearttree').show();
                    init_hearttree();
                    break;
                case 'courage':
                    $('#div_courage').show();
                    init_courage();
                    break;
                case 'birthdaycake':
                    $('#div_dbcake').show();
                    init_birthdaycake();
                    break;
                case 'intersect':
                    $('#div_intersect').show();
                    init_intersect();
                    break;
                case 'onlyyou':
                    $('#div_onlyyou').show();
                    init_onlyyou();
                    break;
                default:
                    init_theme(); 
            }
        } 

        //开始动画主体部分
        function init_theme(){
            console.log('init_theme');
            $('#div_start_bg').fadeOut();
            init_pure_words();            
        }

    </script>




    

    <!-- 按需加载，选择此片头时方才加载 -->
        <script src="style/js/start_hearttree.js"></script>    

    

    

     


            



    <script> 
        var attachment='null'; //可能为null
        var attached_content={"timer_desc":"","timer_time":"2019-12-02","timer_count_type":"timer_count_postive"}; //可能为null
        console.log(attached_content); 
       
        function init_attachment(){  //开始attachment
            console.log('init_attachment ->'+attachment);
            switch(attachment){
                case 'timer':
                    init_at_timer();
                    break;
                default:
                    return; 
            }
        } 
    </script>

    


    <script src='style/js/jweixin-2.2'></script>
	<script src='style/js/theme_common.js'></script> <!-- 音乐控制和微信设置等公共部分js外部引入 -->





</body>
</html>
